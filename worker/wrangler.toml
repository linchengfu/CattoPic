name = 'cattopic-worker'
main = 'src/index.ts'
compatibility_date = '2024-12-01'
compatibility_flags = ['nodejs_compat']

[vars]
ENVIRONMENT = 'production'

# Images binding for image transformations
[images]
binding = "IMAGES"

# R2 Bucket binding
[[r2_buckets]]
binding = 'R2_BUCKET'
bucket_name = 'cattopic-r2'

# D1 Database binding
[[d1_databases]]
binding = 'DB'
database_name = 'CattoPic-D1'
database_id = 'cb07b667-2a42-4ca1-84ce-49d5114af009'

# Cron Triggers - cleanup expired images every hour
[triggers]
crons = ['0 * * * *']

# Development settings
[dev]
port = 8787
local_protocol = 'http'
